{"version":3,"file":"InboxScreen.stories.0e7ce766.js","sources":["../../src/components/InboxScreen.jsx","../../src/components/InboxScreen.stories.jsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport TaskList from \"./TaskList\";\nimport { fetchTasks } from \"../lib/store\";\n\nexport default function InboxScreen() {\n  const dispatch = useDispatch();\n  const { error } = useSelector((state) => state.taskbox);\n  useEffect(() => {\n    dispatch(fetchTasks());\n  }, []);\n\n  if (error) {\n    return (\n      <div className='page lists-show'>\n        <div className='wrapper-message'>\n          <span className='icon-face-sad' />\n          <p className='title-message'>Oh no!</p>\n          <p className='subtitle-message'>Something went wrong</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='page lists-show'>\n      <nav>\n        <h1 className='title-page'>Taskbox</h1>\n      </nav>\n      <TaskList />\n    </div>\n  );\n}\n","import InboxScreen from \"./InboxScreen\";\nimport store from \"../lib/store\";\nimport { rest } from \"msw\";\nimport { MockedState } from \"./TaskList.stories\";\nimport { Provider } from \"react-redux\";\n\nimport {\n  fireEvent,\n  within,\n  waitFor,\n  waitForElementToBeRemoved,\n} from \"@storybook/testing-library\";\n\nexport default {\n  component: InboxScreen,\n  title: \"InboxScreen\",\n  decorators: [(story) => <Provider store={store}>{story()}</Provider>],\n};\n\nconst Template = () => <InboxScreen />;\n\nexport const Default = Template.bind({});\nDefault.parameters = {\n  msw: {\n    handlers: [\n      rest.get(\n        \"https://jsonplaceholder.typicode.com/todos?userId=1\",\n        (req, res, ctx) => {\n          return res(ctx.json(MockedState.tasks));\n        }\n      ),\n    ],\n  },\n};\n\nDefault.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Waits for the element to transition from the loading state\n  await waitForElementToBeRemoved(await canvas.findByTestId(\"loading\"));\n\n  // Waits for the component to be updated based on the store\n  await waitFor(() => {\n    // Simulates pinning the first task\n    fireEvent.click(canvas.getByLabelText(\"pinTask-1\"));\n\n    // Simulate pinning the third task\n    fireEvent.click(canvas.getByLabelText(\"pinTask-3\"));\n  });\n};\n\nexport const Error = Template.bind({});\nError.parameters = {\n  msw: {\n    handlers: [\n      rest.get(\n        \"https://jsonplaceholder.typicode.com/todos?userId=1\",\n        (req, res, ctx) => {\n          return res(ctx.status(403));\n        }\n      ),\n    ],\n  },\n};\n"],"names":["InboxScreen","dispatch","useDispatch","error","useSelector","state","taskbox","useEffect","fetchTasks","_jsx","TaskList","InboxScreen_stories","component","title","decorators","story","Provider","store","Template","Default","bind","parameters","msw","handlers","rest","get","req","res","ctx","json","MockedState","tasks","play","canvasElement","canvas","within","waitForElementToBeRemoved","findByTestId","waitFor","fireEvent","click","getByLabelText","Error","status"],"mappings":"+bAKA,SAAAA,GAAA,CACA,MAAAC,EAAAC,IACA,CAAAC,MAAAA,CAAAC,EAAAA,EAAAC,GAAAA,EAAAC,OAAA,EAKA,OAJAC,EAAAA,QAAAA,UAAA,IAAA,CACAN,EAAAO,GAAA,CACA,EAAA,CAAA,CAAA,EAEAL,IAEA,MAAA,CAAA,UAAA,kBAAA,WACA,MAAA,CAAA,UAAA,kBAAA,SACA,CAAAM,EAAA,OAAA,CAAA,UAAA,eAAA,CAAA,EACAA,EAAA,IAAA,CAAA,UAAA,gBAAA,SAAA,QAAA,CAAA,EACAA,EAAA,IAAA,CAAA,UAAA,mBAAA,SAAA,sBAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAEA,IAKA,MAAA,CAAA,UAAA,kBAAA,SACA,CAAAA,EAAA,MAAA,CAAA,WACA,KAAA,CAAA,UAAA,aAAA,SAAA,SAAA,CAAA,CACA,CAAA,EACAA,EAAAC,EAAA,CAAA,CAAA,CAAA,CAAA,CACA,CAEA,sECnBA,MAAeC,EAAA,CACbC,UAAWZ,EACXa,MAAO,cACPC,WAAY,CAAYC,GAAAN,EAACO,EAAQ,CAAC,MAAAC,EAAa,SAAEF,EAAK,CAAA,CAAc,CAAA,CACtE,EAEMG,EAAW,IAAOT,EAAAT,EAAc,CAAA,CAAA,EAEzBmB,EAAUD,EAASE,KAAK,EAAE,EACvCD,EAAQE,WAAa,CACnBC,IAAK,CACHC,SAAU,CACRC,EAAAA,KAAKC,IACH,sDACA,CAACC,EAAKC,EAAKC,IACFD,EAAIC,EAAIC,KAAKC,EAAYC,KAAK,CAAC,CACvC,CACF,CAEL,CACF,EAEAZ,EAAQa,KAAO,MAAO,CAAEC,cAAAA,CAAc,IAAM,CACpCC,MAAAA,EAASC,EAAOF,CAAa,EAGnC,MAAMG,EAA0B,MAAMF,EAAOG,aAAa,SAAS,CAAC,EAGpE,MAAMC,EAAQ,IAAM,CAElBC,EAAUC,MAAMN,EAAOO,eAAe,WAAW,CAAC,EAGlDF,EAAUC,MAAMN,EAAOO,eAAe,WAAW,CAAC,CAAA,CACnD,CACH,EAEO,MAAMC,EAAQxB,EAASE,KAAK,EAAE,EACrCsB,EAAMrB,WAAa,CACjBC,IAAK,CACHC,SAAU,CACRC,EAAAA,KAAKC,IACH,sDACA,CAACC,EAAKC,EAAKC,IACFD,EAAIC,EAAIe,OAAO,GAAG,CAAC,CAC3B,CACF,CAEL,CACF"}